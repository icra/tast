<!doctype html><html><head>
  <meta charset=utf8>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tast Aigua</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <style>
    [center]{
      text-align:center;
    }
    [opcio_preferida]{
      border:1px solid royalblue;
      border-radius:50%;
      color:royalblue;
      width:50px;
      height:50px;
      font-size:20px;
      display:flex;
      align-items:center;
      justify-content:center;
      margin-right:5px;
    }
    [opcio_preferida]:hover{
      border-color:#af0;
      color:#af0;
    }
    [opcio_preferida][marcada=true]{
      border-color:green;
      color:green;
      font-weight:bold;
    }
    hr{
      border:none;
      border-bottom:1px solid #666;
    }
  </style>
</head><body>
<h1>Tast aigua</h1>

<div id=app>
  <div>
    <b>
      <span>1. Quina aigua és quina? </span>
      <span style="color:royalblue">(marca la casella)</span>
    </b>

    <table border=0>
      <tr>
        <td></td>
        <td v-for="o,i in opcions" center>{{i+1}}</td>
      </tr>
      <tr v-for="a,i in aigues">
        <td>{{a}}</td>
        <td v-for="o,j in opcions">
          <input type=checkbox @change="opcions[j]=(opcions[j]==a?null:a)" :checked="opcions[j]==a"
            :disabled="(opcions[j] && opcions[j]!=a)"
          >
        </td>
      </tr>
    </table>
  </div><hr>

  <div>
    <b>
      <span>2. Quina aigua t'ha agradat més? </span>
      <span style="color:royalblue">(selecciona)</span>
    </b>

    <div style="display:flex;margin-top:5px">
      <div v-for="o,i in opcions" opcio_preferida
        :marcada="opcio_preferida==i"
        @click="opcio_preferida=opcio_preferida==i?null:i"
      >
        <div>{{i+1}}</div>
      </div>
    </div>
  </div><hr>

  <div>
    <b style="color:royalblue">ELS TEUS RESULTATS</b>
    <table border=1 center>
      <tr>
        <th>La teva resposta</th>
        <th>Resposta correcta</th>
      </tr>
      <tr v-for="_,i in opcions"
        :style="{color:opcions[i]==resposta[i]?'green':'red'}"
      >
        <td>
          {{opcions[i] ?? '-'}}
        </td>
        <td>
          {{resposta[i]}}
        </td>
      </tr>
    </table>

    <div style="margin-top:10px">
      <b>Quina aigua t'ha agradat més? </b>
      <b style="color:royalblue" v-if="opcio_preferida!=null">
        Aigua {{resposta[opcio_preferida]}}
      </b>
      <b v-else>--</b>
    </div>
  </div><hr>

  <div>
    <div style="font-size:larger">
      <b>
        Respotes correctes: {{respostes_correctes}}
      </b>
    </div>
    <button style="font-size:x-large">
      Enviar Resultats
    </button>
  </div><hr>
</div>

<div>
  <code>pàgina en construcció</code>
  <b>TO DO</b>
  <ul>
    <li>Falta dissenyar base de dades per guardar les respostes i com es veuria la taula de resultats
  </ul>
</div>

<script>
  let app = Vue.createApp({
    data(){return{
      //respostes usuari
      opcions:[null,null,null,null,null],

      //numero que li ha agradat més a l'usuari
      opcio_preferida:null,

      //respostes correctes
      resposta:[
        "Aixeta",
        "Aixeta filtrada",
        "Embotellada",
        "Dessalada",
        "Pou",
      ],

      //totes les opcions
      aigues:[
        "Aixeta",
        "Aixeta filtrada",
        "Embotellada",
        "Dessalada",
        "Pou",
      ],
    }},

    computed:{
      respostes_correctes(){
        let n=0;
        this.resposta.forEach((r,i)=>{
          if(r==this.opcions[i]){
            n++;
          }
        });
        return n;
      }
    }
  }).mount("#app");
</script>
